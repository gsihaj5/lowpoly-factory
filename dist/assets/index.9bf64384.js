var e=Object.defineProperty,t=("undefined"!=typeof require&&require,(t,n,i)=>(((t,n,i)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i})(t,"symbol"!=typeof n?n+"":n,i),i));import{V as n,C as i,A as o,P as s,W as a,O as r,S as l,a as d,G as c,b as u,D as p,B as w,M as h,c as m}from"./vendor.268e344c.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();async function f(e,t){return new Promise(((n,i)=>t.load("./Assets/3D/"+e,(e=>n(e)),null,i)))}let y,g=[],b=new n(-.2,-.15,0);function E(e,t){setInterval((async()=>{await async function(e,t){let n=y.scene.clone();return t.add(n),g.push(n),n.scale.set(.15,.15,.15),n.position.set(b.x,b.y,b.z),n}(0,t)}),1e3)}class M{constructor(e,t){this.mixers=[],this.loadedModel=void 0,this.glbFile=void 0,this.loader=e,this.scene=t}async loadModel(){this.loadedModel=await f(this.glbFile,this.loader),this.scene.add(this.loadedModel.scene)}loadAnimation(){this.loadedModel.animations.forEach((e=>{let t=new o(this.loadedModel.scene);this.mixers.push(t),t.clipAction(e).play()}))}updateAnimations(e){this.mixers.forEach((t=>t.update(e)))}}t(M,"clock",new i);const v=class extends M{static update(e){v.miners.forEach((t=>t.updateAnimations(e/2)))}constructor(e,t){super(e,t),v.miners.push(this),this.glbFile="MinerMERGED.glb"}async init(){await this.loadModel(),this.loadAnimation()}};let x=v;t(x,"miners",[]);const A=class extends M{static update(e){A.smelters.forEach((t=>t.updateAnimations(e)))}constructor(e,t){super(e,t),A.smelters.push(this),this.glbFile="Smelter.glb"}async init(){await this.loadModel(),this.loadAnimation(),this.loadedModel.scene.rotation.y=Math.PI/-2}};let P=A;t(P,"smelters",[]),(async()=>{let e,t,i,o,b,v,A,k,D=0,L=[new n(0,0,0),new n(-3,0,0)],S=document.querySelector("#next-button"),q=document.querySelector("#prev-button");function z(){i.render(t,e),A.update(),function(){if(D>L.length-1||D<0)return;let t=L[D],n=A.target.clone();A.target.lerp(t,.02);let i=n.sub(A.target);e.position.sub(i)}(),function(e){g.forEach(((t,n,i)=>{t.position.x<=-2.8&&(e.remove(t),t.children.forEach((e=>{e.geometry.dispose()})),i.splice(n,1)),t.position.set(t.position.x-.001,t.position.y,t.position.z)}))}(t);let n=M.clock.getDelta();x.update(n),P.update(n)}function F(){e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),i.setSize(window.innerWidth,window.innerHeight)}function W(e){clearTimeout(k),k=setTimeout((function(){e.wheelDeltaY>0?H():e.wheelDeltaY<0&&j()}),100)}function j(){D+1<=L.length-1&&D++}function H(){D-1>=0&&D--}await async function(){o=document.getElementById("container"),e=new s(75,window.innerWidth/window.innerHeight,.001,1100),e.updateProjectionMatrix(),e.position.set(-1,0,-1),i=new a,i.setPixelRatio(window.devicePixelRatio),i.setSize(window.innerWidth,window.innerHeight),o.appendChild(i.domElement),A=new r(e,i.domElement),t=new l,t.background=new d(1872639),window.addEventListener("resize",F,!1),document.addEventListener("wheel",W,!1),S.addEventListener("click",j,!1),q.addEventListener("click",H,!1),b=new c,e.lookAt(new n),v=new u(10461087),t.add(v);let g=new p(10461087,1);t.add(g),g.position.set(0,10,1);let M=new x(b,t);await M.init();let k=new P(b,t);await k.init(),k.loadedModel.scene.position.set(-3,0,0);let D=new w(2.6,.1,.2),L=new h({color:16777215}),z=new m(D,L);z.translateY(-.23),z.translateX(-1.4),t.add(z);let I=await async function(e,t){y=await f("OreDepositMERGED.glb",e);let n=y.scene.clone();return t.add(n),n}(b,t);console.log(I.position.set(0,-.4,0)),E(0,t)}(),function e(){requestAnimationFrame(e),z()}()})();
